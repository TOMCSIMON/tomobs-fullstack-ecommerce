<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Product Details</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>


    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/product-detail.css}">

    <!-- Bootstrap 5 -->
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css}"
          rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

</head>

<body class="d-flex flex-column min-vh-100" style="background-color:#E4E4E4;">

<div th:insert="~{fragments/navbar :: navbar}"></div>


<main class="flex-grow-1 mt-5">


    <div class="container my-5 ">

        <!-- Product Section -->
        <div class="product-card">
            <div class="row g-4 mt-5">

                <!-- Images Section -->
                <div class="col-md-6 d-flex">
                    <!-- Thumbnail Images -->
                    <div th:if="${productDetail.variants != null and !productDetail.variants.isEmpty()}"
                         class="me-3 d-flex flex-column gap-2">
                        <div th:each="image, stat : ${productDetail.variants[0].imageUrls}"
                             th:if="${stat.index >= 0}">
                            <img th:src="@{${image.imageUrl}}" class="thumb-img" alt="Product thumbnail">
                        </div>
                    </div>

                    <!-- Main Image (first image of first variant) -->
                    <div class="flex-grow-1 text-center">
                        <img th:if="${productDetail.variants != null and !productDetail.variants.isEmpty()
                            and productDetail.variants[0].imageUrls != null
                            and !productDetail.variants[0].imageUrls.isEmpty()}"
                             th:src="@{${productDetail.variants[0].imageUrls[0].imageUrl}}"
                             class="img-fluid main-img"
                             alt="Main product image">
                    </div>
                </div>

                <!-- Product Info -->
                <div class="col-md-6">
                    <!-- Product Name -->
                    <h4 th:text="${productDetail.productName}" class="fw-bold">Product Name</h4>

                    <!-- First Variant Name (if needed) -->
                    <h4 th:if="${productDetail.variants != null and !productDetail.variants.isEmpty()}"
                        th:text="${productDetail.variants[0].name}"
                        class="fw-bold">Variant Name</h4>

                    <!-- Price Section -->
                    <div th:if="${productDetail.variants != null and !productDetail.variants.isEmpty()}"
                         class="d-flex align-items-center my-2">
                        <span class="discount">-10%</span>
                        <h4 th:text="'₹' + ${productDetail.variants[0].price}" class="fw-bold">Price</h4>
                        <small class="text-muted ms-2">(Incl. all Taxes)</small>
                    </div>

                    <!-- Color Options -->
                    <div class="mb-3">
                        <label class="fw-semibold">Color</label><br>
                        <div class="d-flex gap-2">
                            <div th:each="variant, iterStat : ${productDetail.variants}">
                                <button th:text="${variant.color}"
                                        th:classappend="${iterStat.index == 0} ? 'active' : ''"
                                        th:attr="data-variant-id=${variant.id}"
                                        class="d-flex option-btn">
                                    Color
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- RAM Options -->
                    <div class="mb-3">
                        <label class="fw-semibold">RAM</label><br>
                        <div class="d-flex gap-2">
                            <div th:each="variant, iterStat : ${productDetail.variants}">
                                <button th:text="${variant.ram}"
                                        th:classappend="${iterStat.index == 0} ? 'active' : ''"
                                        class="option-btn">
                                    RAM
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Storage Options -->
                    <div class="mb-4">
                        <label class="fw-semibold">Storage</label><br>
                        <div class="d-flex gap-2">
                            <div th:each="variant, iterStat : ${productDetail.variants}">
                                <button th:text="${variant.storage}"
                                        th:classappend="${iterStat.index == 0} ? 'active' : ''"
                                        class="option-btn">
                                    Storage
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex gap-3">
                        <button class="btn buy-btn">Buy Now</button>
                        <button class="btn btn-outline-dark cart-btn">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Features -->
        <h5 class="mt-5 fw-bold">Key Features</h5>
        <div class="feature-box mt-3">
            <p th:if="${productDetail.variants != null and !productDetail.variants.isEmpty()}"
               th:text="${productDetail.variants[0].keyFeatures}">
                Key features will appear here
            </p>
        </div>


        <!-- Similar Products -->
        <h5 class="mt-5 fw-bold">Similar Products</h5>
        <div class="row row-cols-2 row-cols-md-4 g-4 mt-2">

            <div class="col">
                <div class="card similar-card p-2">
                    <img src="https://via.placeholder.com/200" class="card-img-top">
                    <div class="card-body p-2">
                        <p class="small mb-1">Samsung Galaxy S24</p>
                        <strong>₹71,999</strong>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card similar-card p-2">
                    <img src="https://via.placeholder.com/200" class="card-img-top">
                    <div class="card-body p-2">
                        <p class="small mb-1">Nothing Phone (2)</p>
                        <strong>₹44,999</strong>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card similar-card p-2">
                    <img src="https://via.placeholder.com/200" alt="similar image" class="card-img-top">
                    <div class="card-body p-2">
                        <p class="small mb-1">Motorola Edge 50</p>
                        <strong>₹39,999</strong>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card similar-card p-2">
                    <img src="https://via.placeholder.com/200" class="card-img-top">
                    <div class="card-body p-2">
                        <p class="small mb-1">iQOO Neo 9</p>
                        <strong>₹35,999</strong>
                    </div>
                </div>
            </div>

        </div>

    </div>
</main>
<div th:insert="~{fragments/footer :: footer}"></div>

</body>
</html>


